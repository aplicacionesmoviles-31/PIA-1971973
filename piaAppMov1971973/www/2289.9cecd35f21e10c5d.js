"use strict";(self.webpackChunkpia=self.webpackChunkpia||[]).push([[2289],{2289:function(Et,Z,N){N.r(Z),N.d(Z,{ion_virtual_scroll:function(){return X}});var M=N(5861),rt=N(5671),nt=N(3144),it=N(7762),P=N(2361),at=N(3756);function V(){V=function(){return d};var d={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function u(i,t,o){return Object.defineProperty(i,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),i[t]}try{u({},"")}catch(i){u=function(o,h,c){return o[h]=c}}function p(i,t,o,h){var O,D,g,L,f=Object.create((t&&t.prototype instanceof E?t:E).prototype),_=new $(h||[]);return f._invoke=(O=i,D=o,g=_,L="suspendedStart",function(H,tt){if("executing"===L)throw new Error("Generator is already running");if("completed"===L){if("throw"===H)throw tt;return{value:void 0,done:!0}}for(g.method=H,g.arg=tt;;){var et=g.delegate;if(et){var Y=T(et,g);if(Y){if(Y===v)continue;return Y}}if("next"===g.method)g.sent=g._sent=g.arg;else if("throw"===g.method){if("suspendedStart"===L)throw L="completed",g.arg;g.dispatchException(g.arg)}else"return"===g.method&&g.abrupt("return",g.arg);L="executing";var A=m(O,D,g);if("normal"===A.type){if(L=g.done?"completed":"suspendedYield",A.arg===v)continue;return{value:A.arg,done:g.done}}"throw"===A.type&&(L="completed",g.method="throw",g.arg=A.arg)}}),f}function m(i,t,o){try{return{type:"normal",arg:i.call(t,o)}}catch(h){return{type:"throw",arg:h}}}d.wrap=p;var v={};function E(){}function C(){}function k(){}var x={};u(x,a,function(){return this});var w=Object.getPrototypeOf,y=w&&w(w(K([])));y&&y!==r&&e.call(y,a)&&(x=y);var b=k.prototype=E.prototype=Object.create(x);function I(i){["next","throw","return"].forEach(function(t){u(i,t,function(o){return this._invoke(t,o)})})}function S(i,t){function o(c,f,_,O){var D=m(i[c],i,f);if("throw"!==D.type){var g=D.arg,L=g.value;return L&&"object"==typeof L&&e.call(L,"__await")?t.resolve(L.__await).then(function(H){o("next",H,_,O)},function(H){o("throw",H,_,O)}):t.resolve(L).then(function(H){g.value=H,_(g)},function(H){return o("throw",H,_,O)})}O(D.arg)}var h;this._invoke=function(c,f){function _(){return new t(function(O,D){o(c,f,O,D)})}return h=h?h.then(_,_):_()}}function T(i,t){var o=i.iterator[t.method];if(void 0===o){if(t.delegate=null,"throw"===t.method){if(i.iterator.return&&(t.method="return",t.arg=void 0,T(i,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var h=m(o,i.iterator,t.arg);if("throw"===h.type)return t.method="throw",t.arg=h.arg,t.delegate=null,v;var c=h.arg;return c?c.done?(t[i.resultName]=c.value,t.next=i.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function R(i){var t={tryLoc:i[0]};1 in i&&(t.catchLoc=i[1]),2 in i&&(t.finallyLoc=i[2],t.afterLoc=i[3]),this.tryEntries.push(t)}function B(i){var t=i.completion||{};t.type="normal",delete t.arg,i.completion=t}function $(i){this.tryEntries=[{tryLoc:"root"}],i.forEach(R,this),this.reset(!0)}function K(i){if(i){var t=i[a];if(t)return t.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length)){var o=-1,h=function c(){for(;++o<i.length;)if(e.call(i,o))return c.value=i[o],c.done=!1,c;return c.value=void 0,c.done=!0,c};return h.next=h}}return{next:q}}function q(){return{value:void 0,done:!0}}return C.prototype=k,u(b,"constructor",k),u(k,"constructor",C),C.displayName=u(k,l,"GeneratorFunction"),d.isGeneratorFunction=function(i){var t="function"==typeof i&&i.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(i){return Object.setPrototypeOf?Object.setPrototypeOf(i,k):(i.__proto__=k,u(i,l,"GeneratorFunction")),i.prototype=Object.create(b),i},d.awrap=function(i){return{__await:i}},I(S.prototype),u(S.prototype,s,function(){return this}),d.AsyncIterator=S,d.async=function(i,t,o,h,c){void 0===c&&(c=Promise);var f=new S(p(i,t,o,h),c);return d.isGeneratorFunction(t)?f:f.next().then(function(_){return _.done?_.value:f.next()})},I(b),u(b,l,"Generator"),u(b,a,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),d.keys=function(i){var t=[];for(var o in i)t.push(o);return t.reverse(),function h(){for(;t.length;){var c=t.pop();if(c in i)return h.value=c,h.done=!1,h}return h.done=!0,h}},d.values=K,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!t)for(var o in this)"t"===o.charAt(0)&&e.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function h(g,L){return _.type="throw",_.arg=t,o.next=g,L&&(o.method="next",o.arg=void 0),!!L}for(var c=this.tryEntries.length-1;c>=0;--c){var f=this.tryEntries[c],_=f.completion;if("root"===f.tryLoc)return h("end");if(f.tryLoc<=this.prev){var O=e.call(f,"catchLoc"),D=e.call(f,"finallyLoc");if(O&&D){if(this.prev<f.catchLoc)return h(f.catchLoc,!0);if(this.prev<f.finallyLoc)return h(f.finallyLoc)}else if(O){if(this.prev<f.catchLoc)return h(f.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return h(f.finallyLoc)}}}},abrupt:function(t,o){for(var h=this.tryEntries.length-1;h>=0;--h){var c=this.tryEntries[h];if(c.tryLoc<=this.prev&&e.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var f=c;break}}f&&("break"===t||"continue"===t)&&f.tryLoc<=o&&o<=f.finallyLoc&&(f=null);var _=f?f.completion:{};return _.type=t,_.arg=o,f?(this.method="next",this.next=f.finallyLoc,v):this.complete(_)},complete:function(t,o){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&o&&(this.next=o),v},finish:function(t){for(var o=this.tryEntries.length-1;o>=0;--o){var h=this.tryEntries[o];if(h.finallyLoc===t)return this.complete(h.completion,h.afterLoc),B(h),v}},catch:function(t){for(var o=this.tryEntries.length-1;o>=0;--o){var h=this.tryEntries[o];if(h.tryLoc===t){var c=h.completion;if("throw"===c.type){var f=c.arg;B(h)}return f}}throw new Error("illegal catch attempt")},delegateYield:function(t,o,h){return this.delegate={iterator:K(t),resultName:o,nextLoc:h},"next"===this.method&&(this.arg=void 0),v}},d}var U="item",j="header",G="footer",lt=function(r,e){var n=ht(r,e);return n&&r.ownerDocument?r.ownerDocument.importNode(n.content,!0).children[0]:null},ht=function(r,e){switch(e){case U:return r.querySelector("template:not([name])");case j:return r.querySelector("template[name=header]");case G:return r.querySelector("template[name=footer]")}},dt=function(r,e){return 0===e?0:e===(r.length>0?r[r.length-1].index:0)+1?r.length:r.findIndex(function(a){return a.index===e})},pt=function(r,e,n){if(0===n&&e.length>=r.length)return e;for(var a=0;a<e.length;a++)r[a+n]=e[a];return r},Q=function(r,e,n,a,s,l,u,p,m,v,E,C){for(var k=[],x=C+E,w=E;w<x;w++){var y=r[w];if(s){var b=s(y,w,r);null!=b&&k.push({i:v++,type:j,value:b,index:w,height:n?n(b,w):u,reads:n?0:2,visible:!!n})}if(k.push({i:v++,type:U,value:y,index:w,height:e?e(y,w):m,reads:e?0:2,visible:!!e}),l){var I=l(y,w,r);null!=I&&k.push({i:v++,type:G,value:I,index:w,height:a?a(I,w):p,reads:a?0:2,visible:!!a})}}return k},vt=function(r,e,n){for(var a=r[n],s=n;s<r.length;s++)r[s]=a,a+=e[s].height;return a},gt=function(r,e){if(!r)return new Uint32Array(e);if(r.length===e)return r;if(e>r.length){var n=new Uint32Array(e);return n.set(r),n}return r.subarray(0,e)},X=function(){function d(r){var e=this;(0,rt.Z)(this,d),(0,P.r)(this,r),this.range={offset:0,length:0},this.viewportHeight=0,this.cells=[],this.virtualDom=[],this.isEnabled=!1,this.viewportOffset=0,this.currentScrollTop=0,this.indexDirty=0,this.lastItemLen=0,this.totalHeight=0,this.approxItemHeight=45,this.approxHeaderHeight=30,this.approxFooterHeight=30,this.onScroll=function(){e.updateVirtualScroll()}}return(0,nt.Z)(d,[{key:"itemsChanged",value:function(){this.calcCells(),this.updateVirtualScroll()}},{key:"componentWillLoad",value:function(){console.warn("[Deprecation Warning]: ion-virtual-scroll has been deprecated and will be removed in Ionic Framework v7.0. See https://ionicframework.com/docs/angular/virtual-scroll for migration steps.")}},{key:"connectedCallback",value:(r=(0,M.Z)(V().mark(function n(){var a;return V().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=this.el.closest("ion-content")){l.next=4;break}return console.error("<ion-virtual-scroll> must be used inside an <ion-content>"),l.abrupt("return");case 4:return l.next=6,a.getScrollElement();case 6:this.scrollEl=l.sent,this.contentEl=a,this.calcCells(),this.updateState();case 10:case"end":return l.stop()}},n,this)})),function e(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:function(){this.updateState()}},{key:"disconnectedCallback",value:function(){this.scrollEl=void 0}},{key:"onResize",value:function(){this.calcCells(),this.updateVirtualScroll()}},{key:"positionForItem",value:function(e){return Promise.resolve(function(r,e,n){var a=e.find(function(s){return s.type===U&&s.index===r});return a?n[a.i]:-1}(e,this.cells,this.getHeightIndex()))}},{key:"checkRange",value:function(){var r=(0,M.Z)(V().mark(function n(a){var s,l,u,p,m=arguments;return V().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(s=m.length>1&&void 0!==m[1]?m[1]:-1,this.items){E.next=3;break}return E.abrupt("return");case 3:l=-1===s?this.items.length-a:s,u=dt(this.cells,a),p=Q(this.items,this.itemHeight,this.headerHeight,this.footerHeight,this.headerFn,this.footerFn,this.approxHeaderHeight,this.approxFooterHeight,this.approxItemHeight,u,a,l),this.cells=pt(this.cells,p,u),this.lastItemLen=this.items.length,this.indexDirty=Math.max(a-1,0),this.scheduleUpdate();case 10:case"end":return E.stop()}},n,this)}));return function e(n){return r.apply(this,arguments)}}()},{key:"checkEnd",value:function(){var r=(0,M.Z)(V().mark(function n(){return V().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:this.items&&this.checkRange(this.lastItemLen);case 1:case"end":return s.stop()}},n,this)}));return function e(){return r.apply(this,arguments)}}()},{key:"updateVirtualScroll",value:function(){!this.isEnabled||!this.scrollEl||(this.timerUpdate&&(clearTimeout(this.timerUpdate),this.timerUpdate=void 0),(0,P.f)(this.readVS.bind(this)),(0,P.c)(this.writeVS.bind(this)))}},{key:"readVS",value:function(){for(var e=this.contentEl,n=this.scrollEl,s=0,l=this.el;l&&l!==e;)s+=l.offsetTop,l=l.offsetParent;this.viewportOffset=s,n&&(this.viewportHeight=n.offsetHeight,this.currentScrollTop=n.scrollTop)}},{key:"writeVS",value:function(){var e=this.indexDirty,a=function(r,e,n){return{top:Math.max(r-100,0),bottom:r+e+100}}(this.currentScrollTop-this.viewportOffset,this.viewportHeight),s=this.getHeightIndex(),l=function(r,e,n){for(var a=e.top,s=e.bottom,l=0;l<r.length&&!(r[l]>a);l++);for(var u=Math.max(l-2-1,0);l<r.length&&!(r[l]>=s);l++);return{offset:u,length:Math.min(l+2,r.length)-u}}(s,a),u=function(r,e,n){return r<=n.offset+n.length||e.offset!==n.offset||e.length!==n.length}(e,this.range,l);!u||(this.range=l,function(r,e,n,a){var l,s=(0,it.Z)(r);try{for(s.s();!(l=s.n()).done;){var u=l.value;u.change=0,u.d=!0}}catch(y){s.e(y)}finally{s.f()}for(var p=[],m=a.offset+a.length,v=function(b){var I=n[b],S=r.find(function(R){return R.d&&R.cell===I});if(S){var T=e[b];T!==S.top&&(S.top=T,S.change=1),S.d=!1}else p.push(I)},E=a.offset;E<m;E++)v(E);for(var C=r.filter(function(y){return y.d}),k=function(){var b=w[x],I=C.find(function(T){return T.d&&T.cell.type===b.type}),S=b.i;I?(I.d=!1,I.change=2,I.cell=b,I.top=e[S]):r.push({d:!1,cell:b,visible:!0,change:2,top:e[S]})},x=0,w=p;x<w.length;x++)k();r.filter(function(y){return y.d&&-9999!==y.top}).forEach(function(y){y.change=1,y.top=-9999})}(this.virtualDom,s,this.cells,l),this.nodeRender?function(r,e,n,a){for(var u,s=Array.from(r.children).filter(function(k){return"TEMPLATE"!==k.tagName}),l=s.length,p=0;p<n.length;p++){var m=n[p],v=m.cell;if(2===m.change){if(p<l)e(u=s[p],v,p);else{var E=lt(r,v.type);(u=e(E,v,p)||E).classList.add("virtual-item"),r.appendChild(u)}u.$ionCell=v}else u=s[p];0!==m.change&&(u.style.transform="translate3d(0,".concat(m.top,"px,0)"));var C=v.visible;m.visible!==C&&(C?u.classList.remove("virtual-loading"):u.classList.add("virtual-loading"),m.visible=C),v.reads>0&&(a(v,u),v.reads--)}}(this.el,this.nodeRender,this.virtualDom,this.updateCellHeight.bind(this)):this.domRender?this.domRender(this.virtualDom):this.renderItem&&(0,P.j)(this))}},{key:"updateCellHeight",value:function(e,n){var a=this,s=function(){if(n.$ionCell===e){var u=window.getComputedStyle(n),p=n.offsetHeight+parseFloat(u.getPropertyValue("margin-bottom"));a.setCellHeight(e,p)}};n?(0,at.c)(n,s):s()}},{key:"setCellHeight",value:function(e,n){var a=e.i;e===this.cells[a]&&(e.height!==n||!0!==e.visible)&&(e.visible=!0,e.height=n,this.indexDirty=Math.min(this.indexDirty,a),this.scheduleUpdate())}},{key:"scheduleUpdate",value:function(){var e=this;clearTimeout(this.timerUpdate),this.timerUpdate=setTimeout(function(){return e.updateVirtualScroll()},100)}},{key:"updateState",value:function(){var e=!(!this.scrollEl||!this.cells);e!==this.isEnabled&&(this.enableScrollEvents(e),e&&this.updateVirtualScroll())}},{key:"calcCells",value:function(){!this.items||(this.lastItemLen=this.items.length,this.cells=Q(this.items,this.itemHeight,this.headerHeight,this.footerHeight,this.headerFn,this.footerFn,this.approxHeaderHeight,this.approxFooterHeight,this.approxItemHeight,0,0,this.lastItemLen),this.indexDirty=0)}},{key:"getHeightIndex",value:function(){return this.indexDirty!==1/0&&this.calcHeightIndex(this.indexDirty),this.heightIndex}},{key:"calcHeightIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.heightIndex=gt(this.heightIndex,this.cells.length),this.totalHeight=vt(this.heightIndex,this.cells,e),this.indexDirty=1/0}},{key:"enableScrollEvents",value:function(e){var n=this;this.rmEvent&&(this.rmEvent(),this.rmEvent=void 0);var a=this.scrollEl;a&&(this.isEnabled=e,a.addEventListener("scroll",this.onScroll),this.rmEvent=function(){a.removeEventListener("scroll",n.onScroll)})}},{key:"renderVirtualNode",value:function(e){var n=e.cell,s=n.value,l=n.index;switch(n.type){case U:return this.renderItem(s,l);case j:return this.renderHeader(s,l);case G:return this.renderFooter(s,l)}}},{key:"render",value:function(){var e=this;return(0,P.h)(P.H,{style:{height:"".concat(this.totalHeight,"px")}},this.renderItem&&(0,P.h)(_t,{dom:this.virtualDom},this.virtualDom.map(function(n){return e.renderVirtualNode(n)})))}},{key:"el",get:function(){return(0,P.i)(this)}}],[{key:"watchers",get:function(){return{itemHeight:["itemsChanged"],headerHeight:["itemsChanged"],footerHeight:["itemsChanged"],items:["itemsChanged"]}}}]),d;var r}(),_t=function(r,e,n){var a=r.dom;return n.map(e,function(s,l){var u=a[l],p=s.vattrs||{},m=p.class||"";return m+="virtual-item ",u.visible||(m+="virtual-loading"),Object.assign(Object.assign({},s),{vattrs:Object.assign(Object.assign({},p),{class:m,style:Object.assign(Object.assign({},p.style),{transform:"translate3d(0,".concat(u.top,"px,0)")})})})})};X.style="ion-virtual-scroll{display:block;position:relative;width:100%;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-virtual-scroll>.virtual-loading{opacity:0}ion-virtual-scroll>.virtual-item{position:absolute !important;top:0 !important;right:0 !important;left:0 !important;-webkit-transition-duration:0ms;transition-duration:0ms;will-change:transform}"}}]);